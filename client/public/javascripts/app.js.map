{"version":3,"sources":["app/application.coffee","app/initialize.coffee","app/lib/app_helpers.coffee","app/lib/base_view.coffee","app/lib/client.coffee","app/lib/view_collection.coffee","app/router.coffee","app/views/app_view.coffee","app/views/logout_view.coffee","app/views/page_view.coffee","app/views/templates/home.jade","app/views/templates/logout.jade","app/views/templates/page.jade"],"names":[],"mappings":"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","file":"public/javascripts/app.js","sourcesContent":["module.exports =\n\n    initialize: ->\n        # Used in inter-app communication\n        #SocketListener = require '../lib/socket_listener'\n\n        # Routing management\n        Router = require 'router'\n        @router = new Router()\n        Backbone.history.start()\n\n        # Makes this object immuable.\n        Object.freeze this if typeof Object.freeze is 'function'","app = require 'application'\n\n# The function called from index.html\n$ ->\n    require 'lib/app_helpers'\n\n    app.initialize()","(() ->\n    # IIFE to avoid collisions with other variables\n    (->\n        # Make it safe to do console.log() always.\n        console = window.console = window.console or {}\n        method = undefined\n        dummy = ->\n        methods = ('assert,count,debug,dir,dirxml,error,exception,\n                   group,groupCollapsed,groupEnd,info,log,markTimeline,\n                   profile,profileEnd,time,timeEnd,trace,warn').split ','\n\n        console[method] = console[method] or dummy while method = methods.pop()\n    )()\n)()\n","module.exports = class BaseView extends Backbone.View\n\n    template: ->\n\n    initialize: ->\n\n    getRenderData: ->\n        model: @model?.toJSON()\n\n    render: ->\n        @beforeRender()\n        @$el.html @template(@getRenderData())\n        @afterRender()\n        @\n\n    beforeRender: ->\n\n    afterRender: ->\n\n    destroy: ->\n        @undelegateEvents()\n        @$el.removeData().unbind()\n        @remove()\n        Backbone.View::remove.call @\n","# Make ajax request more easy to do.\n# Expected callbacks: success and error\nexports.request = (type, url, data, callbacks) ->\n\n    success = callbacks.success or (res) -> callbacks null, res\n    error = callbacks.error or (err) -> callbacks err\n\n\n    $.ajax\n        type: type\n        url: url\n        data: data\n        success: success\n        error: error\n\n# Sends a get request with data as body\n# Expected callbacks: success and error\nexports.get = (url, callbacks) ->\n    exports.request \"GET\", url, null, callbacks\n\n# Sends a post request with data as body\n# Expected callbacks: success and error\nexports.post = (url, data, callbacks) ->\n    exports.request \"POST\", url, data, callbacks\n\n# Sends a put request with data as body\n# Expected callbacks: success and error\nexports.put = (url, data, callbacks) ->\n    exports.request \"PUT\", url, data, callbacks\n\n# Sends a delete request with data as body\n# Expected callbacks: success and error\nexports.del = (url, callbacks) ->\n    exports.request \"DELETE\", url, null, callbacks\n","BaseView = require 'lib/base_view'\n\n# View that display a collection of subitems\n# used to DRY views\n# Usage : new ViewCollection(collection:collection)\n# Automatically populate itself by creating a itemView for each item\n# in its collection\n\n# can use a template that will be displayed alongside the itemViews\n\n# itemView       : the Backbone.View to be used for items\n# itemViewOptions : the options that will be passed to itemViews\n# collectionEl : the DOM element's selector where the itemViews will\n#                be displayed. Automatically falls back to el if null\n\nmodule.exports = class ViewCollection extends BaseView\n\n    itemview: null\n\n    views: {}\n\n    template: -> ''\n\n    itemViewOptions: ->\n\n    collectionEl: null\n\n    # add 'empty' class to view when there is no subview\n    onChange: ->\n        @$el.toggleClass 'empty', _.size(@views) is 0\n\n    # can be overriden if we want to place the subviews somewhere else\n    appendView: (view) ->\n        @$collectionEl.append view.el\n\n    # bind listeners to the collection\n    initialize: ->\n        super\n        @views = {}\n        @listenTo @collection, \"reset\",   @onReset\n        @listenTo @collection, \"add\",     @addItem\n        @listenTo @collection, \"remove\",  @removeItem\n\n        if not @collectionEl?\n            collectionEl = el\n\n    # if we have views before a render call, we detach them\n    render: ->\n        view.$el.detach() for id, view of @views\n        super\n\n    # after render, we reattach the views\n    afterRender: ->\n        @$collectionEl = $(@collectionEl)\n        @appendView view.$el for id, view of @views\n        @onReset @collection\n        @onChange @views\n\n    # destroy all sub views before remove\n    remove: ->\n        @onReset []\n        super\n\n    # event listener for reset\n    onReset: (newcollection) ->\n        view.remove() for id, view of @views\n        newcollection.forEach @addItem\n\n    # event listeners for add\n    addItem: (model) =>\n        options = _.extend {}, {model: model}, @itemViewOptions(model)\n        view = new @itemview(options)\n        @views[model.cid] = view.render()\n        @appendView view\n        @onChange @views\n\n    # event listeners for remove\n    removeItem: (model) =>\n        @views[model.cid].remove()\n        delete @views[model.cid]\n\n        @onChange @views","AppView     = require 'views/app_view'\nPageView    = require 'views/page_view'\nLogoutView  = require 'views/logout_view'\n\nmodule.exports = class Router extends Backbone.Router\n\n    # We try to maintain some continuity within the display, like still displaying\n    # a correct page even when we have an error\n\n    routes:\n      ''         : 'init'\n      'login'    : 'login'\n      'logout'   : 'logout'\n      ':pagename': 'page'\n\n    init: ->\n      mainView = new AppView()\n      mainView.renderIfNotLoggedIn()\n\n    login: ->\n      mainView = new AppView()\n      mainView.render()\n\n    page: (pagename) =>\n      if not pagename\n        pagename = \"\"\n      mainView = new PageView()\n      mainView.renderPage(pagename)\n\n    logout: =>\n      @url = ''\n      mainView = new LogoutView()\n      mainView.render()","BaseView = require '../lib/base_view'\n\nmodule.exports = class AppView extends BaseView\n\n    el: 'body.application'\n    template: require('./templates/home')\n\n    mail: false\n    params: {}\n\n    events: =>\n        'submit'     : @loginCAS\n\n    renderIfNotLoggedIn: =>\n        $.ajax\n            url: 'login'\n            method: 'GET'\n            dataType: 'json'\n            success: (data) =>\n                if data.isLoggedIn\n                    @goToDefaultService()\n                else\n                    @render()\n                    @mail = data.mail\n                    @params = data.params\n\n    loginCAS: =>\n        $('#status').html 'En cours'\n        $.ajax\n            url: 'login'\n            method: 'POST'\n            data:\n                username: $('input#username').val()\n                password: $('input#password').val()\n            dataType: 'json'\n            success: (data) =>\n                if data.status\n                    $('input#username').attr(\"readonly\", \"\")\n                    $('input#password').attr(\"readonly\", \"\")\n                    if @mail\n                        $('#status').html 'Connecté, redirection...'\n                        @createMailAccount (err) =>\n                            if err\n                                $('#status').html err\n                            else\n                                @goToDefaultService()\n                    else\n                        @goToDefaultService()\n                else\n                    $('#status').html 'Erreur'\n            error: =>\n                $('#status').html 'Erreur HTTP'\n\n    goToDefaultService: =>\n        $.ajax\n            type: \"GET\"\n            dataType: \"text\"\n            async: false\n            url: 'defaultService'\n            success: (data) ->\n                window.location = \"#\" + data\n\n    createMailAccount: (callback) =>\n        @mailAccountExists (err, doesExists) =>\n            if err\n                $('#status').html err\n            else if doesExists\n                # If the e-mail account already exists, we don't need to create it\n                callback null\n            else\n                $.ajax\n                    type: \"GET\"\n                    url: 'email'\n                    dataType: \"text\"\n                    success: (data) =>\n                        if data is ''\n                            email = $('input#username').val()+'@'+@params.domain\n                        else\n                            email = data\n                        @saveMailAccount\n                            username: $('input#username').val()\n                            password: $('input#password').val()\n                            email: email\n                        , callback\n\n    mailAccountExists: (callback) ->\n        $.ajax\n            url: 'email'\n            type: 'POST'\n            dataType: \"json\"\n            success: (data) ->\n                if data.err\n                    callback err\n                else\n                    callback null, data.exists\n            error: ->\n                callback 'Erreur HTTP'\n\n    saveMailAccount: (data, callback) =>\n        $.ajax\n            url: '/apps/emails/account'\n            method: 'POST'\n            data:\n                label: @params.label\n                name: data.username\n                login: data.email\n                password: data.password\n                accountType: \"IMAP\"\n                smtpServer: @params.smtpServer\n                smtpPort: @params.smtpPort\n                smtpSSL: @params.smtpSSL\n                smtpTLS: @params.smtpTLS\n                smtpLogin: data.username\n                smtpMethod: @params.smtpMethod\n                imapLogin: data.username\n                imapServer: @params.imapServer\n                imapPort: @params.imapPort\n                imapSSL: @params.imapSSL\n                imapTLS: @params.imapTLS\n            dataType: 'json'\n            success: (data) =>\n                callback null\n            error: =>\n                callback null","BaseView  = require '../lib/base_view'\n\nmodule.exports = class LogoutView extends BaseView\n\n    el: 'body'\n    template: require './templates/logout'\n\n    events: =>\n\n    getRenderData: ->\n        res =\n            url: @url\n\n    beforeRender: =>\n        @serviceData = new Array\n        $.ajax\n            type: \"GET\"\n            dataType: \"json\"\n            async: false\n            url: 'servicesList'\n            success: (data) =>\n                for key, service of data\n                    if service.clientLogoutUrl\n                        @serviceData.push\n                            name: service.displayName\n                            logOutUrl: service.clientLogoutUrl\n                @logoutStatus =\n                    numServicesToLogOut: @serviceData.length + 1#+1 for server deco\n                    numServicesLoggedOut: 0\n            error: (err) =>\n                @serviceData.err = err\n\n    logout: ->\n\n\n    afterRender: =>\n        setTimeout =>\n            window.location = \"#login\"\n        , 5000\n        console.log \"<p>Déconnexion de l'application cozy</p>\"\n        $.ajax\n            type: \"GET\"\n            dataType: \"json\"\n            async: true\n            url: \"logout\"\n            success: (data) =>\n                if data.error\n                    console.log \"<p>L'application cozy à renvoyée l'erreur suivante: \" + data.error + \"</p>\"\n                else\n                    console.log \"<p>L'application cozy est déconnectée du serveur CAS.</p>\"\n                    @checkLogout()\n            error: (err) =>\n                console.log \"<p>Impossible de joindre l'application cozy: \" + err + \"</p>\"\n                console.log err\n\n        if not @serviceData.err\n            for key, service of @serviceData\n                console.log '<p>Déconnexion du service ' + service.name + ' sur l\\'url: ' + service.logOutUrl + '</p>'\n                onLoad = =>\n                    sname = service.name\n                    return =>\n                        console.log '<p>Service ' + sname + ' déconecté.</p>'\n                        @checkLogout()\n                $(\"#logoutIframes\").append('<iframe src=\"' + service.logOutUrl + '\"></iframe>')\n                .children().last().one \"load\", onLoad()\n        else\n            console.log '<p>Une erreur est survenue lors de la récupération de la liste des services: ' + @serviceData.err + '</p>'\n\n    checkLogout: =>\n        @logoutStatus.numServicesLoggedOut++\n        if @logoutStatus.numServicesLoggedOut is @logoutStatus.numServicesToLogOut\n            console.log '<p>Déconnexion de tout les services et du serveur CAS effectuée.</p>'\n            #window.location = \"#login\"","BaseView  = require '../lib/base_view'\nAppView   = require 'views/app_view'\n\nmodule.exports = class PageView extends BaseView\n\n    el: 'body'\n    template: require './templates/page'\n\n    error: ''\n\n    events: =>\n        'click #closeError': 'hideError'\n        'keydown': 'hideError'\n\n    getRenderData: ->\n        res =\n            url: @url\n\n    renderPage: (pageid, oldpage) =>\n        if typeof oldpage is 'undefined'\n            oldpage =\n                url: 'moodle'\n        @pageid = pageid\n        return $.get 'authUrl/'+pageid, '', (data) =>\n            if data.error\n                if data.error is \"No user logged in\"\n                    window.location = \"#login\"\n                    return\n                else\n                    @error = data.error\n                    @url = \"\"\n            else\n                @url = data.url\n            document.title = window.location\n            @render()\n        , 'json'        \n\n    afterRender: =>\n        if @error\n            @showError @error\n        $.ajax\n            type: \"GET\"\n            dataType: \"json\"\n            async: false\n            url: 'servicesList'\n            success: (data) =>\n                for key, service of data\n                    if service.clientServiceUrl is @pageid and service.clientRedirectPage\n                        @redirectUrl = service.clientRedirectPage\n                        if service.clientRedirectTimeOut\n                            setTimeout =>\n                                $(\"#app\").attr(\"src\", @redirectUrl)\n                            , service.clientRedirectTimeOut\n                        else\n                            $(\"#app\").one \"load\", =>\n                                $(\"#app\").attr(\"src\", @redirectUrl)\n                    li =\n                        '<li class=\"serviceButton\">\n                            <a href=\"#'+service.clientServiceUrl+'\">\n                                <i class=\"'+service.clientIcon+'\"></i>\n                                <span>'+service.displayName+'</span>\n                            </a>\n                        </li>'\n                    $(\"#servicesMenu\").append(li)\n            error: (err) =>\n                @showError err.status + \" : \" + err.statusText + \"<br>\" + err.responseText\n\n    showError: (err) =>\n        $(\"#errorText\").html err\n        $(\"#errors\").removeClass 'off-error'\n        $(\"#errors\").addClass 'on-error'\n\n    hideError: (e)=>\n        if e.type is \"click\" or e.keyCode is 13 or e.keyCode is 27\n            $(\"#errors\").removeClass 'on-error'\n            $(\"#errors\").addClass 'off-error'","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<div id=\\\"content\\\"><div id=\\\"home\\\"><h1>ENT ISEN</h1><h2>Merci de rentrer vos identifiants</h2><form onSubmit=\\\"return false\\\"><input type=\\\"text\\\" id=\\\"username\\\" placeholder=\\\"Nom d'utilisateur\\\"/><br/><input type=\\\"password\\\" id=\\\"password\\\" placeholder=\\\"Mot de passe\\\"/><br/><input type=\\\"submit\\\" id=\\\"submit\\\" value=\\\"Se connecter\\\"/></form><div id=\\\"status\\\"></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<div id=\\\"home\\\"><div id=\\\"status\\\">Déconnexion...</div><div id=\\\"logoutIframes\\\" style=\\\"display:none\\\"></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),url = locals_.url;\nbuf.push(\"<div id=\\\"content\\\"><div id=\\\"errors\\\"><p>Erreur</p><p id=\\\"errorText\\\"></p><span id=\\\"closeError\\\" class=\\\"on-error\\\">ok</span></div><div id=\\\"sidebar\\\"><ul id=\\\"servicesMenu\\\"></ul><span class=\\\"exitButton\\\"><a href=\\\"#logout\\\"><i class=\\\"fa fa-sign-out\\\"></i><span>Déconnexion</span></a></span></div><iframe id=\\\"app\\\"\" + (jade.attr(\"src\", \"\" + (url) + \"\", true, false)) + \"></iframe></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}"]}